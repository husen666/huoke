# 火客智能营销获客系统 - 产品需求文档 (PRD)

> 版本：v1.1 | 日期：2026-02-22 | 项目代号：HuoKeAgent
>
> **已确认决策**：
> - AI 模型：DeepSeek（主力模型）
> - 部署方式：自部署（Docker Compose 单机 → 可扩展 K8s）
> - 客户端：Web 优先，后续扩展移动端（微信小程序 + 响应式 PWA）
> - 渠道优先级：微信生态 > 抖音 > 小红书 > 百度（P0）

---

## 一、产品概述

### 1.1 产品定位
火客智能营销获客系统（HuoKeAgent）是一套面向中小企业的 **AI 驱动全渠道智能营销获客平台**，整合中国主流互联网平台获客渠道，通过 AI 智能体自动化完成线索获取、客户管理、智能客服、精准营销全链路闭环。

### 1.2 核心价值
| 维度 | 描述 |
|------|------|
| 全渠道整合 | 一站式接入抖音、小红书、微信、百度等 10+ 中国主流平台 |
| AI 驱动 | 基于大语言模型 + RAG 知识库实现智能获客与客服 |
| 自动化营销 | 通过微信/钉钉自动触达、培育、转化客户 |
| 数据闭环 | 从线索获取→培育→转化→复购全链路数据追踪 |

### 1.3 目标用户
- 中小企业市场/销售团队
- 独立创业者 / 个人品牌
- 营销代理机构
- 电商卖家

---

## 二、功能模块设计

### 模块总览

```
┌─────────────────────────────────────────────────────────────────┐
│                     火客智能营销获客系统                           │
├──────────┬──────────┬──────────┬──────────┬──────────────────────┤
│  获客渠道  │  客户管理  │  客服中心  │  知识库   │   营销触达           │
│  中心     │  CRM     │          │  & 记忆  │   (微信/钉钉)        │
├──────────┼──────────┼──────────┼──────────┼──────────────────────┤
│  数据分析  │  AI 引擎  │  工作流   │  系统管理  │   开放 API           │
│  & 报表   │  中心     │  自动化   │          │                     │
└──────────┴──────────┴──────────┴──────────┴──────────────────────┘
```

---

### 2.1 获客渠道中心

#### 2.1.1 支持平台

| 平台 | 渠道类型 | 获客方式 | 优先级 |
|------|---------|---------|-------|
| **微信生态** | 社交 | 公众号粉丝获取、小程序获客、朋友圈广告、企业微信 | P0 |
| **抖音** | 短视频 | 评论区线索、私信获客、直播间线索、DOU+ 投放 | P0 |
| **小红书** | 种草社区 | 笔记评论线索、私信获客、薯条投放 | P0 |
| **百度** | 搜索引擎 | SEM 竞价、SEO 自然流量、百度信息流 | P0 |
| **快手** | 短视频 | 评论线索、私信获客、直播获客 | P1 |
| **B站** | 视频 | 评论区获客、私信获客 | P1 |
| **知乎** | 问答 | 回答引流、知+ 投放 | P1 |
| **微博** | 社交媒体 | 粉丝获取、微博广告、话题营销 | P2 |
| **脉脉** | 职场社交 | B2B 精准获客 | P2 |
| **美团/大众点评** | 本地生活 | 门店获客、团购引流 | P2 |
| **淘宝/天猫/拼多多** | 电商 | 店铺客户、广告投放 | P2 |
| **LinkedIn** | 职场社交 | 外贸/跨境 B2B 获客 | P3 |

#### 2.1.2 获客功能

- **线索采集器**：自动抓取各平台评论、私信中的潜在客户信息
- **表单生成器**：可视化拖拽生成落地页/表单，嵌入各渠道
- **UTM 追踪**：每个渠道自动生成带追踪参数的链接
- **智能去重**：基于手机号/微信号/邮箱自动去重合并
- **渠道 ROI 分析**：实时计算各渠道获客成本与转化率

#### 2.1.3 数据模型

```
Lead (线索) {
  id: UUID
  source_platform: 平台标识
  source_channel: 具体渠道 (如: 抖音-直播间-XX直播)
  source_campaign: 关联活动
  contact_name: 姓名
  contact_phone: 手机号
  contact_wechat: 微信号
  contact_email: 邮箱
  company: 公司名称
  industry: 行业
  region: 地区
  utm_source / utm_medium / utm_campaign / utm_content
  raw_data: JSON (原始平台数据)
  score: 线索评分
  status: 新线索 | 跟进中 | 已转化 | 已流失
  assigned_to: 分配客服/销售
  created_at / updated_at
}
```

---

### 2.2 客户资料管理 (CRM)

#### 2.2.1 客户档案

- **360° 客户画像**：整合多渠道数据形成完整客户视图
- **自定义字段**：支持自定义客户属性字段
- **标签体系**：多维度标签（来源标签、行为标签、价值标签、阶段标签）
- **客户分群**：基于规则或 AI 自动分群
- **客户旅程**：可视化展示客户从首次触达到转化的完整路径

#### 2.2.2 客户生命周期管理

```
潜在客户 → 意向客户 → 商机客户 → 成交客户 → 复购客户
    ↓          ↓          ↓          ↓          ↓
  培育期      跟进期      谈判期      服务期      忠诚期
```

- 每个阶段自动触发不同营销策略
- 客户阶段自动升降级规则
- 流失预警机制

#### 2.2.3 线索评分 (Lead Scoring)

| 评分维度 | 权重 | 示例 |
|---------|------|------|
| 行为评分 | 40% | 访问页面(+5)、下载资料(+10)、咨询客服(+15)、参加活动(+20) |
| 属性评分 | 30% | 目标行业(+20)、决策者角色(+15)、公司规模匹配(+10) |
| 互动评分 | 20% | 邮件打开(+3)、链接点击(+5)、回复消息(+10) |
| 时效评分 | 10% | 最近7天活跃(+10)、30天未活跃(-5) |

#### 2.2.4 数据模型

```
Customer {
  id: UUID
  type: 个人 | 企业
  name: 名称
  avatar: 头像
  phone: 手机号
  wechat_id: 微信号
  dingtalk_id: 钉钉号
  email: 邮箱
  company: 公司信息 {}
  tags: [标签列表]
  stage: 客户阶段
  score: 综合评分
  owner: 负责人
  custom_fields: {} (自定义字段)
  source_leads: [关联线索]
  activities: [行为记录]
  conversations: [会话记录]
  deals: [商机记录]
}
```

---

### 2.3 客服管理中心

#### 2.3.1 多渠道统一工作台

- **统一收件箱**：所有渠道的客户消息汇聚到一个界面
- **智能路由**：基于客户标签、问题类型、客服技能自动分配
- **会话管理**：支持文字、语音、图片、视频、文件等多媒体消息
- **快捷回复**：预设常用回复模板
- **协同功能**：会话转接、多人协助、内部备注

#### 2.3.2 AI 智能客服

- **智能应答**：基于知识库自动回答客户常见问题
- **意图识别**：自动识别客户意图，分类处理
- **情感分析**：实时分析客户情绪，负面情绪自动预警
- **人机协作**：AI 先回复，复杂问题自动转人工
- **对话摘要**：自动生成每次对话的摘要和跟进建议

#### 2.3.3 客服团队管理

- **坐席管理**：客服人员上下线、状态管理
- **工单系统**：客户问题工单化流转
- **SLA 管理**：响应时间、解决时间 SLA 规则
- **质检评分**：AI 自动质检 + 人工抽检
- **绩效看板**：响应时长、解决率、满意度等 KPI

#### 2.3.4 数据模型

```
Conversation {
  id: UUID
  customer_id: 客户 ID
  channel: 渠道来源
  agent_id: 客服 ID
  status: 等待中 | 进行中 | 已解决 | 已关闭
  priority: 低 | 中 | 高 | 紧急
  messages: [消息列表]
  ai_summary: AI 摘要
  satisfaction_score: 满意度评分
  tags: [问题标签]
  sla_deadline: SLA 截止时间
  created_at / resolved_at / closed_at
}

Agent (客服) {
  id: UUID
  name: 姓名
  role: 客服 | 组长 | 主管
  skills: [技能标签]
  status: 在线 | 忙碌 | 离线
  max_concurrent: 最大并发会话数
  working_hours: 工作时间
  performance: { 响应时长, 解决率, 满意度 }
}
```

---

### 2.4 知识库 & AI 记忆系统

#### 2.4.1 知识库管理

- **文档管理**：支持上传 PDF、Word、Excel、网页链接等
- **分类目录**：树形结构知识分类
- **FAQ 管理**：常见问答对管理
- **知识图谱**：自动构建产品/服务知识关联
- **版本管理**：知识变更历史追溯

#### 2.4.2 RAG 检索增强生成

- **向量化存储**：文档自动切片、Embedding 向量化
- **语义检索**：基于语义相似度精准检索相关知识
- **混合检索**：关键词 + 语义双路召回，提升准确率
- **上下文增强**：检索结果注入 LLM 生成精准回复

#### 2.4.3 AI 记忆系统

- **短期记忆**：当前会话上下文（对话历史）
- **长期记忆**：客户偏好、历史交互摘要
- **共享记忆**：团队共享的客户洞察
- **记忆检索**：与客户交流时自动召回相关历史记忆
- **记忆衰减**：自动降低过时信息权重

#### 2.4.4 数据模型

```
KnowledgeBase {
  id: UUID
  name: 知识库名称
  description: 描述
  documents: [Document]
  faqs: [FAQ]
}

Document {
  id: UUID
  title: 标题
  content: 原始内容
  chunks: [DocumentChunk]  // 切片
  embedding_status: 处理状态
  category: 分类
  tags: [标签]
}

Memory {
  id: UUID
  customer_id: 关联客户
  type: 短期 | 长期 | 共享
  content: 记忆内容
  embedding: 向量
  importance: 重要度评分
  decay_factor: 衰减系数
  last_accessed: 最后访问时间
  metadata: {}
}
```

---

### 2.5 营销触达（微信 & 钉钉）

#### 2.5.1 企业微信营销

- **好友管理**：批量添加、标签管理、分组管理
- **群发消息**：文本、图文、小程序卡片群发
- **朋友圈营销**：定时发布、素材库管理
- **社群运营**：群自动拉人、群消息管理、群活码
- **自动回复**：关键词触发、AI 智能回复
- **客户SOP**：自动化客户培育流程（Day1欢迎→Day3产品介绍→Day7优惠推送）

#### 2.5.2 钉钉营销

- **钉钉机器人**：自动推送消息、交互式卡片
- **钉钉群管理**：群消息推送、客户群运营
- **钉钉工作通知**：精准推送工作通知
- **审批集成**：营销审批流程对接

#### 2.5.3 营销自动化引擎

- **可视化工作流**：拖拽式营销自动化流程设计
- **触发条件**：事件触发、时间触发、条件触发
- **执行动作**：发消息、打标签、分配客服、更新阶段、发通知
- **A/B 测试**：营销内容 A/B 测试
- **营销日历**：活动规划与排期

```
示例工作流：新客户欢迎流程
┌─────────┐    ┌───────────┐    ┌───────────┐    ┌──────────┐
│ 新线索   │───▶│ 等待10分钟 │───▶│ 发送欢迎  │───▶│ 等待1天   │
│ 进入     │    │           │    │ 消息      │    │          │
└─────────┘    └───────────┘    └───────────┘    └────┬─────┘
                                                      │
                                                      ▼
                                                ┌───────────┐
                                          ┌─YES─│ 已回复？   │─NO─┐
                                          │     └───────────┘    │
                                          ▼                      ▼
                                    ┌──────────┐          ┌──────────┐
                                    │ AI 跟进   │          │ 发送产品  │
                                    │ 对话      │          │ 介绍      │
                                    └──────────┘          └──────────┘
```

---

### 2.6 数据分析 & 报表

#### 2.6.1 数据看板

- **总览仪表盘**：今日线索数、转化率、客户数、营收
- **渠道分析**：各渠道获客数据对比、ROI 分析
- **客户分析**：客户来源分布、阶段分布、价值分布
- **客服分析**：响应时长、满意度、工单统计
- **营销分析**：触达率、回复率、转化率

#### 2.6.2 报表功能

- 自定义报表生成
- 定时报表自动推送
- 数据导出（Excel / PDF）
- 趋势对比分析

---

### 2.7 系统管理

- **组织架构**：部门/团队/成员管理
- **权限管理**：RBAC 细粒度权限控制
- **操作日志**：全链路操作审计
- **系统配置**：渠道接入配置、通知设置
- **API 管理**：开放 API 文档与密钥管理

---

## 三、技术架构设计

### 3.1 技术栈选型

| 层级 | 技术 | 选型理由 |
|------|------|---------|
| **前端框架** | Next.js 15 + React 19 | SSR/SSG 性能优异，App Router 架构 |
| **UI 组件** | Tailwind CSS 4 + shadcn/ui | 现代设计系统，高度可定制 |
| **状态管理** | Zustand + TanStack Query | 轻量高效的客户端状态管理 |
| **后端框架** | Node.js + Hono | 超高性能 Web 框架，边缘计算友好 |
| **AI 引擎** | LangChain.js + DeepSeek API | DeepSeek-V3 对话 + DeepSeek-R1 推理，国产高性价比 |
| **主数据库** | PostgreSQL 16 | 可靠的关系型数据库 |
| **向量数据库** | Qdrant | 高性能向量检索，支持混合搜索 |
| **缓存** | Redis 7 (Dragonfly) | 高性能缓存 + 消息队列 |
| **搜索引擎** | Meilisearch | 轻量级全文搜索，中文友好 |
| **消息队列** | BullMQ (Redis) | Node.js 生态最佳任务队列 |
| **实时通信** | Socket.IO | WebSocket 实时消息推送 |
| **ORM** | Drizzle ORM | 类型安全、高性能 ORM |
| **文件存储** | MinIO / 阿里云 OSS | S3 兼容对象存储 |
| **监控** | Prometheus + Grafana | 系统监控与告警 |
| **部署** | Docker + Docker Compose | 容器化部署，可扩展至 K8s |
| **CI/CD** | GitHub Actions | 自动化构建部署 |

### 3.2 系统架构图

```
                          ┌──────────────────┐
                          │   CDN / Nginx    │
                          └────────┬─────────┘
                                   │
                          ┌────────▼─────────┐
                          │   Next.js 前端    │
                          │   (SSR + CSR)    │
                          └────────┬─────────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
           ┌───────▼──────┐ ┌────▼─────┐ ┌─────▼──────┐
           │  API Gateway  │ │ WebSocket│ │  Webhook   │
           │  (Hono)      │ │ Server   │ │  Receiver  │
           └───────┬──────┘ └────┬─────┘ └─────┬──────┘
                   │             │              │
        ┌──────────┼─────────────┼──────────────┤
        │          │             │              │
  ┌─────▼────┐ ┌──▼───────┐ ┌──▼──────┐ ┌────▼──────┐
  │ 获客服务  │ │ CRM 服务  │ │ 客服服务 │ │ 营销服务   │
  │          │ │          │ │         │ │           │
  └─────┬────┘ └──┬───────┘ └──┬──────┘ └────┬──────┘
        │         │            │              │
        └─────────┼────────────┼──────────────┘
                  │            │
     ┌────────────┼────────────┼──────────────┐
     │            │            │              │
  ┌──▼───┐  ┌────▼───┐  ┌────▼────┐  ┌──────▼─────┐
  │ PgSQL │  │ Redis  │  │ Qdrant  │  │ Meilisearch│
  │      │  │        │  │ (向量)   │  │  (全文搜索) │
  └──────┘  └────────┘  └─────────┘  └────────────┘
                  │
           ┌──────▼──────┐
           │  BullMQ     │
           │  任务队列    │
           └──────┬──────┘
                  │
     ┌────────────┼────────────┐
     │            │            │
  ┌──▼──────┐ ┌──▼──────┐ ┌──▼──────┐
  │ AI Worker│ │ 渠道    │ │ 通知    │
  │ (LLM)   │ │ Worker  │ │ Worker  │
  └─────────┘ └─────────┘ └─────────┘
```

### 3.3 目录结构

```
huokeagent/
├── apps/
│   ├── web/                     # Next.js 前端应用
│   │   ├── app/                 # App Router
│   │   │   ├── (auth)/          # 认证相关页面
│   │   │   ├── (dashboard)/     # 主面板
│   │   │   │   ├── leads/       # 线索管理
│   │   │   │   ├── customers/   # 客户管理
│   │   │   │   ├── inbox/       # 统一收件箱
│   │   │   │   ├── knowledge/   # 知识库
│   │   │   │   ├── campaigns/   # 营销活动
│   │   │   │   ├── workflows/   # 工作流
│   │   │   │   ├── analytics/   # 数据分析
│   │   │   │   └── settings/    # 系统设置
│   │   │   ├── api/             # API Routes
│   │   │   └── layout.tsx
│   │   ├── components/          # UI 组件
│   │   │   ├── ui/              # shadcn 基础组件
│   │   │   ├── leads/           # 线索组件
│   │   │   ├── customers/       # 客户组件
│   │   │   ├── inbox/           # 消息组件
│   │   │   ├── knowledge/       # 知识库组件
│   │   │   ├── campaigns/       # 营销组件
│   │   │   ├── workflows/       # 工作流组件
│   │   │   └── analytics/       # 分析图表组件
│   │   └── lib/                 # 前端工具库
│   │
│   └── server/                  # Hono 后端服务
│       ├── src/
│       │   ├── routes/          # API 路由
│       │   ├── services/        # 业务逻辑
│       │   ├── models/          # 数据模型
│       │   ├── workers/         # 后台任务
│       │   ├── integrations/    # 第三方平台集成
│       │   │   ├── wechat/      # 微信/企业微信
│       │   │   ├── dingtalk/    # 钉钉
│       │   │   ├── douyin/      # 抖音
│       │   │   ├── xiaohongshu/ # 小红书
│       │   │   ├── baidu/       # 百度
│       │   │   └── ...
│       │   ├── ai/              # AI 引擎
│       │   │   ├── llm/         # LLM 调用
│       │   │   ├── rag/         # RAG 检索增强
│       │   │   ├── memory/      # 记忆系统
│       │   │   └── agents/      # AI Agent
│       │   ├── websocket/       # WebSocket 服务
│       │   └── utils/           # 工具函数
│       └── drizzle/             # 数据库迁移
│
├── packages/
│   ├── shared/                  # 前后端共享类型/工具
│   ├── ui/                      # 共享 UI 组件
│   └── config/                  # 共享配置
│
├── docker/                      # Docker 配置
├── docs/                        # 项目文档
├── turbo.json                   # Turborepo 配置
├── pnpm-workspace.yaml
└── package.json
```

---

## 四、核心流程设计

### 4.1 获客流程

```
外部平台 (抖音/小红书/微信...)
        │
        ▼
  ┌─────────────┐
  │ Webhook/API  │ ← 平台回调或定时拉取
  │ 线索接收     │
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │ 线索清洗     │ ← 去重、格式化、补全
  │ & 标准化     │
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │ AI 线索评分  │ ← 基于规则 + AI 模型
  └──────┬──────┘
         │
    ┌────┴────┐
    │         │
  高分线索   低分线索
    │         │
    ▼         ▼
  自动分配   进入线索池
  给销售     等待培育
```

### 4.2 智能客服流程

```
客户消息进入
      │
      ▼
  ┌──────────┐
  │ 意图识别  │
  └────┬─────┘
       │
  ┌────┴─────┐
  │          │
简单问题    复杂问题
  │          │
  ▼          ▼
┌────────┐  ┌────────┐
│ 知识库  │  │ 转人工  │
│ RAG查询 │  │ 客服   │
└───┬────┘  └───┬────┘
    │           │
    ▼           ▼
 AI 生成     人工处理
 回复        (AI 辅助)
    │           │
    └─────┬─────┘
          │
          ▼
    记录到记忆系统
    更新客户画像
```

### 4.3 营销自动化流程

```
触发事件 (新客户 / 标签变更 / 时间触发 / 行为触发)
      │
      ▼
  ┌──────────┐
  │ 条件判断  │ ← 满足条件才继续
  └────┬─────┘
       │
       ▼
  ┌──────────┐
  │ 渠道选择  │ ← 微信 / 钉钉 / 短信 / 邮件
  └────┬─────┘
       │
       ▼
  ┌──────────┐
  │ 内容生成  │ ← 模板 + AI 个性化
  └────┬─────┘
       │
       ▼
  ┌──────────┐
  │ 消息发送  │ ← 遵守频率限制
  └────┬─────┘
       │
       ▼
  ┌──────────┐
  │ 效果追踪  │ ← 送达/打开/点击/回复
  └──────────┘
```

---

## 五、非功能需求

### 5.1 性能要求

| 指标 | 目标值 |
|------|-------|
| API 响应时间 | P95 < 200ms |
| 页面加载时间 | 首屏 < 1.5s |
| 并发用户数 | 单节点 1000+ |
| 消息处理吞吐 | 10000 条/分钟 |
| AI 响应时间 | P95 < 3s |
| 系统可用性 | 99.9% |

### 5.2 安全要求

- 数据加密：传输 TLS 1.3，存储 AES-256
- 认证：JWT + Refresh Token 双 Token 机制
- 授权：RBAC 细粒度权限
- API 安全：Rate Limiting、请求签名
- 数据脱敏：客户敏感信息脱敏展示
- 合规：符合《个人信息保护法》《数据安全法》

### 5.3 可扩展性

- 微服务可独立水平扩展
- 支持多租户 SaaS 部署
- 插件化渠道接入机制
- 开放 API 支持第三方集成

---

## 六、开发里程碑

### Phase 1 - 基础框架 & 核心 CRM（4 周）
- [x] 项目脚手架搭建 (Monorepo + Docker)
- [ ] 用户认证 & 权限系统
- [ ] 客户资料管理 (CRUD + 标签 + 搜索)
- [ ] 线索管理基础功能
- [ ] 基础数据看板

### Phase 2 - 智能客服 & 知识库（4 周）
- [ ] 统一消息收件箱
- [ ] AI 智能客服引擎
- [ ] 知识库管理 & RAG 检索
- [ ] AI 记忆系统
- [ ] 客服工作台

### Phase 3 - 渠道接入（4 周）
- [ ] 企业微信接入
- [ ] 钉钉接入
- [ ] 抖音接入
- [ ] 小红书接入
- [ ] 百度 SEM 对接

### Phase 4 - 营销自动化（3 周）
- [ ] 可视化工作流引擎
- [ ] 微信营销功能
- [ ] 钉钉营销功能
- [ ] 营销模板库
- [ ] A/B 测试

### Phase 5 - 数据分析 & 优化（3 周）
- [ ] 高级数据分析看板
- [ ] 渠道 ROI 分析
- [ ] AI 智能报告生成
- [ ] 系统性能优化
- [ ] 安全加固

---

## 七、API 设计概览

### RESTful API 规范

```
基础路径: /api/v1

认证相关:
  POST   /auth/login              # 登录
  POST   /auth/register           # 注册
  POST   /auth/refresh            # 刷新 Token
  POST   /auth/logout             # 登出

线索管理:
  GET    /leads                   # 线索列表
  POST   /leads                   # 创建线索
  GET    /leads/:id               # 线索详情
  PUT    /leads/:id               # 更新线索
  POST   /leads/:id/assign        # 分配线索
  POST   /leads/:id/convert       # 转化为客户
  POST   /leads/import            # 批量导入
  GET    /leads/stats             # 线索统计

客户管理:
  GET    /customers               # 客户列表
  POST   /customers               # 创建客户
  GET    /customers/:id           # 客户详情
  PUT    /customers/:id           # 更新客户
  GET    /customers/:id/timeline  # 客户时间线
  GET    /customers/:id/deals     # 客户商机
  POST   /customers/:id/tags      # 管理标签
  POST   /customers/segment       # 客户分群

客服消息:
  GET    /conversations                  # 会话列表
  POST   /conversations                  # 创建会话
  GET    /conversations/:id              # 会话详情
  POST   /conversations/:id/messages     # 发送消息
  POST   /conversations/:id/assign       # 分配客服
  POST   /conversations/:id/resolve      # 解决会话

知识库:
  GET    /knowledge-bases                # 知识库列表
  POST   /knowledge-bases                # 创建知识库
  POST   /knowledge-bases/:id/documents  # 上传文档
  POST   /knowledge-bases/:id/query      # 知识查询
  GET    /knowledge-bases/:id/faqs       # FAQ 列表

营销:
  GET    /campaigns                # 营销活动列表
  POST   /campaigns                # 创建活动
  POST   /campaigns/:id/execute    # 执行活动
  GET    /campaigns/:id/stats      # 活动统计
  GET    /workflows                # 工作流列表
  POST   /workflows                # 创建工作流
  PUT    /workflows/:id/toggle     # 启用/停用工作流

渠道:
  GET    /channels                 # 渠道列表
  POST   /channels                 # 接入渠道
  GET    /channels/:id/stats       # 渠道统计
  POST   /channels/:id/webhook     # 渠道 Webhook

数据分析:
  GET    /analytics/overview       # 总览数据
  GET    /analytics/leads          # 线索分析
  GET    /analytics/channels       # 渠道分析
  GET    /analytics/agents         # 客服分析
  POST   /analytics/reports        # 生成报表
```

---

## 八、数据库 ER 关系概览

```
users (用户) ──────────── organizations (组织)
  │                            │
  ├── agents (客服)            ├── teams (团队)
  │                            │
  ├── leads (线索) ──────────── channels (渠道)
  │     │
  │     └── lead_activities (线索行为)
  │
  ├── customers (客户) ──────── customer_tags (标签)
  │     │
  │     ├── conversations (会话) ── messages (消息)
  │     ├── deals (商机)
  │     └── memories (记忆)
  │
  ├── knowledge_bases (知识库)
  │     ├── documents (文档)
  │     │     └── document_chunks (文档切片)
  │     └── faqs (FAQ)
  │
  ├── campaigns (营销活动)
  │     └── campaign_executions (执行记录)
  │
  └── workflows (工作流)
        └── workflow_executions (执行记录)
```

---

> **下一步**：确认需求后，将开始 Phase 1 的项目脚手架搭建和核心模块开发。
